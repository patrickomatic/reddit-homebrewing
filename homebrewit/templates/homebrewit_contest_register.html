{% extends "homebrewit.html" %}
{% load staticfiles %}


{% block include %}
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.js"></script>
    <script type="text/javascript" src="{% static "js/contest_controller.js" %}"></script>
{% endblock %}


{% block title %}
    Register
{% endblock %}


{% block contenttitle %}
    Want to enter in the competition?
{% endblock %}


{% block content %}
    <p>Just pick which style you'll be brewing:</p>

    <form class="contest-entry-form" method="POST" action="{% url "homebrewit.contest.views.register" contest_year.contest_year %}" role="form" ng-app="contestApp" ng-controller="ContestSignupCtrl" ng-init="init({{contest_year.contest_year}})" />
        {% verbatim %}
        <div class="form-group">
            <div class="dropdown theme-dropdown clearfix">
                <div id="style-menu-1" href="#" role="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    <span>{{styleChosen.name || "Choose Style"}} <span class="caret"></span></span>
                </div>

                <ul class="dropdown-menu" role="menu" aria-labeledby="style-menu-1">
                    <li role="presentation" class="divider" ng-if="style.has_subcategories" ng-repeat-start="style in styles"></li>

                    <li role="presentation" tab-index="-1" ng-attr-class="{{style.has_subcategories && 'dropdown-header'}}" ng-repeat-end>
                        <a role="menuitem" href="#"  ng-click="chosen(style)" ng-if="!style.has_subcategories">{{style.name}}</a>
                        <span role="menuitem" href="#" ng-if="style.has_subcategories">{{style.name}}</span>
                    </li>
                </ul>

            </div>
        </div>

        <div class="form-group" ng-repeat="question in styleChosen.beer_details">
            <label for="question_{{question.id}}">{{question.description}}</label>
            <input id="question_{{question.id}}" type="text" ng-model="question.value" ng-attr-placeholder="{{question.must_specify && 'Required' || ''}}" />
        </div>

        <hr/>

        <div class="form-group">
            <button type="button" ng-click="registerForContest()" class="btn btn-primary">Register!</button>
        </div>

        {% endverbatim %}
    </form>
{% endblock %}
